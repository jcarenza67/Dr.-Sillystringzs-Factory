@{
  Layout = "_Layout";
}

@using Factory.Models
@model Factory.Models.Machine

<div class="container">
  <h2 class="my-4">Machine Details: @Html.DisplayFor(model => model.MachineType)</h2>
  <hr />
  <h3>Last Serviced: @Model.LastServiced</h3>
  <h4>Machines Age: @Html.DisplayFor(model => model.Age)</h4> 
  <h4>Machine Description: </h4>
  <p>@Html.DisplayFor(model => model.MachineDescription)</p>

  @if(@Model.JoinEntities.Count == 0)
  {
    <p>No engineers have been added to this machine!</p>
  }
  else
  {
    <h4>This machine is being serviced by the following engineers:</h4>
    <ul class="list-group">
      @foreach(EngineerMachine join in Model.JoinEntities)
      {
        <li class="list-group-item">@Html.ActionLink($"{join.Engineer.EngineerFName}", "Details", "Engineers", new { id = join.Engineer.EngineerId})</li>
      }
    </ul>
  }

  <p>@Html.ActionLink("Add an engineer for this machine", "AddEngineers", new { id = Model.MachineId }, new { @class = "btn btn-primary mt-3" })</p>
  <p>@Html.ActionLink("Edit machine", "Edit", new { id = Model.MachineId }, new { @class = "btn btn-info mt-3" })</p>
  <p>@Html.ActionLink("Back to machines", "Index", "Machines", null, new { @class = "btn btn-secondary mt-3" })</p>
  <p>@Html.ActionLink("Delete machine", "Delete", new { id = Model.MachineId }, new { @class = "btn btn-danger mt-3" })</p>
</div>